<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="CarolinaCardClub.db" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser query" current="1"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="34"/><column_width id="3" width="3599"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><table title="Session_List_View" custom_title="0" dock_id="13" table="4,17:mainSession_List_View"/><table title="Player" custom_title="0" dock_id="5" table="4,6:mainPlayer"/><table title="Session" custom_title="0" dock_id="10" table="4,7:mainSession"/><table title="Payment" custom_title="0" dock_id="14" table="4,7:mainPayment"/><dock_state state="000000ff00000000fd00000001000000020000059c00000370fc0100000005fc00000000000005f60000000000fffffffa000000000100000001fb000000160064006f0063006b00420072006f00770073006500310100000000ffffffff0000000000000000fc000000000000068d0000000000fffffffa000000000100000004fb000000160064006f0063006b00420072006f00770073006500340100000000ffffffff0000000000000000fb000000160064006f0063006b00420072006f00770073006500360100000000ffffffff0000000000000000fb000000160064006f0063006b00420072006f00770073006500360100000000ffffffff0000000000000000fb000000160064006f0063006b00420072006f00770073006500370100000000ffffffff0000000000000000fc00000000000002910000000000fffffffa000000000100000001fb000000160064006f0063006b00420072006f00770073006500380000000000ffffffff0000000000000000fc000000000000059c0000010b00fffffffa000000140200000016fb000000180064006f0063006b00420072006f007700730065003100340000000000ffffffff000000a500fffffffb000000160064006f0063006b00420072006f00770073006500390000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003100340000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003100310000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003100320000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003100310000000000000002f80000000000000000fb000000180064006f0063006b00420072006f007700730065003100310000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003100320000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003100340000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003100340100000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003100350000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003100360000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003100370000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003100380000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003100390000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003200300000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003200310000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003200320000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003200330000000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f007700730065003100330100000000ffffffff000000a500fffffffb000000160064006f0063006b00420072006f00770073006500350100000000ffffffff000000a500fffffffb000000180064006f0063006b00420072006f007700730065003100300100000000ffffffff000000a500fffffffb000000180064006f0063006b00420072006f007700730065003100330100000000ffffffff00000000000000000000059c0000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="Payment" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort><column index="0" mode="0"/></sort><column_widths><column index="1" value="87"/><column index="2" value="72"/><column index="3" value="59"/><column index="4" value="72"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Payment_Rate_Interval_ID_View" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="70"/><column index="2" value="97"/><column index="3" value="113"/><column index="4" value="59"/><column index="5" value="117"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Payment_Rate_View" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="70"/><column index="2" value="109"/><column index="3" value="59"/><column index="4" value="117"/><column index="5" value="88"/><column index="6" value="120"/><column index="7" value="141"/><column index="8" value="110"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Player" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort><column index="0" mode="0"/></sort><column_widths><column index="1" value="70"/><column index="2" value="137"/><column index="3" value="121"/><column index="4" value="185"/><column index="5" value="107"/><column index="6" value="163"/><column index="7" value="166"/><column index="8" value="166"/><column index="9" value="136"/><column index="10" value="97"/><column index="11" value="152"/></column_widths><filter_values><column index="0" value="3"/></filter_values><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Player_Balance_View" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="63"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Player_Category" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort><column index="0" mode="0"/></sort><column_widths><column index="1" value="136"/><column index="2" value="102"/><column index="3" value="117"/><column index="4" value="110"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Player_Category_Rate_Interval_View" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="136"/><column index="2" value="102"/><column index="3" value="135"/><column index="4" value="135"/><column index="5" value="38"/><column index="6" value="83"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Player_Info" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="70"/><column index="2" value="121"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Player_Selection_View" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="70"/><column index="2" value="112"/><column index="3" value="60"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Player_Total_Payment_View" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="70"/><column index="2" value="105"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Player_Total_Session_Amount_View" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="70"/><column index="2" value="97"/><column index="3" value="99"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Purchased_Seconds_View" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="70"/><column index="2" value="97"/><column index="3" value="116"/><column index="4" value="59"/><column index="5" value="55"/><column index="6" value="117"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Rate" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="59"/><column index="2" value="38"/><column index="3" value="83"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Rate_Interval" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="117"/><column index="2" value="135"/><column index="3" value="135"/><column index="4" value="59"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Rate_Interval_View" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="117"/><column index="2" value="114"/><column index="3" value="115"/><column index="4" value="38"/><column index="5" value="83"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Session" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="81"/><column index="2" value="72"/><column index="3" value="206"/><column index="4" value="136"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Session_Amount_View" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="81"/><column index="2" value="139"/><column index="3" value="136"/><column index="4" value="148"/><column index="5" value="70"/><column index="6" value="97"/><column index="7" value="68"/><column index="8" value="38"/><column index="9" value="120"/><column index="10" value="59"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Session_List_View" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="81"/><column index="2" value="70"/><column index="3" value="97"/><column index="4" value="135"/><column index="5" value="136"/><column index="6" value="128"/><column index="7" value="102"/><column index="8" value="88"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Session_Rate_View" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="81"/><column index="2" value="70"/><column index="3" value="139"/><column index="4" value="136"/><column index="5" value="201"/><column index="6" value="97"/><column index="7" value="68"/><column index="8" value="135"/><column index="9" value="135"/><column index="10" value="38"/><column index="11" value="120"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 1"></sql><sql name="Edit View Player_Selection_View">SELECT
s.Player_ID as Player_ID, 
s.Session_ID as Session_ID, 
MAX(s.Start_Epoch) as Most_Recent_Start_Epoch
FROM Session as s
GROUP BY s.Player_ID
ORDER BY s.Start_Epoch DESC</sql><sql name="Edit View Player_Selection_View">DROP VIEW IF EXISTS &quot;main&quot;.&quot;Player_Selection_View&quot;;
CREATE VIEW &quot;Player_Selection_View&quot; AS 
SELECT
  p.Player_ID,
  IFNULL(p.NickName, p.Name) as Name,
  IFNULL(b.Balance,0.00) as Balance
 FROM
   Player as p
  LEFT JOIN
  Player_Most_Recent_Session_Start_Epoch_View as s
  ON p.Player_ID == s.Player_ID
 LEFT JOIN
   Player_Balance_View as b
ON p.Player_ID == b.Player_ID
WHERE p.Phone_number is NOT NULL AND p.Phone_number != '***MISSING***' and p.Flag is  NULL
ORDER by s.Most_Recent_Start_Epoch DESC, p.Player_Category_ID ASC, Name ASC</sql><sql name="Edit View Session_Rate_View">DROP VIEW IF EXISTS &quot;main&quot;.&quot;Session_Rate_View&quot;;
CREATE VIEW &quot;Session_Rate_View&quot; AS 

SELECT 
 
 s.Session_ID,
 s.Player_ID,
 s.Start_Epoch as Session_Start_Epoch,
 s.Stop_Epoch as Session_Stop_Epoch,
IFNULL(s.Stop_Epoch, unixepoch('now')) as Effective_Session_Stop_Epoch,
IFNULL(p.NickName,p.Name) as Name,  
 
pc.Name as Category,
pc.Player_Category_ID as Category_ID,
pc.Start as Rate_Start_Epoch,
pc.Stop as Rate_Stop_Epoch,
pc.Rate as Rate,
pc.Description as Rate_Description

 FROM Session as s, Player as p, Player_Category_Rate_Interval_View as pc
WHERE s.Player_ID == p.Player_ID AND p.Player_Category_ID == pc.Player_Category_ID</sql><sql name="Edit View Session_Amount_View">DROP VIEW IF EXISTS &quot;main&quot;.&quot;Session_Amount_View&quot;;
CREATE VIEW &quot;Session_Amount_View&quot; AS 
SELECT 
	srv.Session_ID,
	srv.Session_Start_Epoch,
	srv.Session_Stop_Epoch,
    MAX(srv.Effective_Session_Stop_Epoch - srv.Session_Start_Epoch, 0) as Duration_In_Seconds,
	srv.Player_ID,
	srv.Name,
    srv.Category,
    srv.Rate,
    srv.Rate_Description,
   round ( MAX(  srv.Effective_Session_Stop_Epoch - srv.Session_Start_Epoch, 0) * srv.Rate  / 3600.0 ) as Amount
 FROM 
    Session_Rate_View as srv
ORDER BY srv.Session_Stop_Epoch ASC, srv.Category_ID ASC, srv.Name ASC</sql><current_tab id="4"/></tab_sql></sqlb_project>
